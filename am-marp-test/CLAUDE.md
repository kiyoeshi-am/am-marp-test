# Claude AI アシスタント

## プロジェクト概要
このプロジェクトは、Marpを使用したプレゼンテーション作成システムです。

## 技術スタック
- **Marp**: Markdownベースのプレゼンテーションフレームワーク
- **SCSS**: スタイルシート言語
- **Markdown**: コンテンツ記述言語

## ファイル構造
```
am-marp-test/
├── themes/
│   ├── theme_Algomatic.scss # グローバルスタイル定義
│   └── partials/
│       ├── _utility.scss   # ユーティリティ関数・変数
│       ├── _company.scss   # ブランドカラー・ロゴ
│       └── _structure.scss # 構造テンプレート専用スタイル
├── input/                  # 入力Markdownファイル
├── output/                 # 出力PDFファイル
└── template_structure.md   # 構造テンプレート
```

## CursorでのMarkdown・スタイル定義ルール

### 1. ファイル分離の原則

#### グローバルスタイル（theme.scss）
- **対象**: すべてのスライドで共通して使用されるスタイル
- **内容**:
  - ヘッダー・フッター
  - 基本タイポグラフィ（h1-h6, p, li）
  - テーブル基本スタイル
  - ユーティリティクラス（幅、色、余白など）
- **禁止事項**:
  - 個別ページ専用のスタイル（title-slide, toc-slide等）
  - 特定のレイアウト構造

#### パーシャルファイル（partials/）
- **_utility.scss**: 関数・変数・ミックスイン
- **_company.scss**: ブランドカラー・ロゴ設定
- **_structure.scss**: 構造テンプレート専用スタイル

### 2. Markdown構造の原則

#### 純粋なMarkdown構造
- **推奨**: 標準Markdown記法のみ使用
- **禁止**: HTMLタグやdivクラス指定
- **例外**: 画像のalt属性でスタイル指定（`alt="登壇者"`など）

#### スタイル分離の原則
- **Markdownファイル**: 構造とコンテンツのみ記載
- **SCSSファイル**: すべてのスタイル定義
- **禁止**: Markdownファイル内でのスタイル記述
- **禁止**: HTMLタグでのスタイル指定

#### セクション分離
```markdown
---
marp: true
theme: theme_Algomatic
---

# タイトルスライド
{:.title-slide}

---

# 目次
{:.toc-slide}

1. 項目1
2. 項目2

---

# 章タイトル
{:.chapter-slide}
```

### 3. スタイル定義の階層

#### レベル1: グローバル（theme.scss）
```scss
// すべてのスライドで共通
section {
  color: navyblue(950);
  background-color: #ffffff;
  font-family: 'Noto Sans JP', sans-serif;
}

h1 {
  @include typography(xl8, 2);
  font-weight: 700;
  margin: 0 0 1.5rem 0;
}
```

#### レベル2: 構造テンプレート（_structure.scss）
```scss
// template_structure.md専用
section.cover.presentation {
  background-color: navyblue(950);
  color: #ffffff;
  // 構造テンプレート固有のスタイル
}
```

### 4. 命名規則

#### クラス名
- **グローバル**: 汎用的な名前（`.w-full`, `.text-center`）
- **構造専用**: 具体的な用途（`.speaker-flex`, `.three-column`）

#### セクション名
- **汎用**: `title-slide`, `toc-slide`, `chapter-slide`
- **構造専用**: `cover.presentation`, `cover.company-deck`

### 5. カラー管理

#### ブランドカラー（_company.scss）
```scss
// ブランドカラー関数
@function navyblue($level) {
  @return map-get($navyblue, $level);
}
```

#### 使用原則
- **直接値禁止**: `#1a365d` → `navyblue(950)`
- **変数優先**: `$primary-color` → `navyblue(700)`

### 6. レスポンシブ対応

#### 基本原則
- **モバイルファースト**: 小画面から大画面へ
- **フレキシブルレイアウト**: 固定幅より相対幅
- **オーバーフロー対策**: `word-wrap`, `overflow-wrap`

### 7. パフォーマンス考慮

#### スタイル最適化
- **不要なスタイル削除**: 使用しないクラスは削除
- **重複排除**: 同じ機能のスタイルは統合
- **ファイル分離**: グローバルとローカルを明確に分離

#### 読み込み順序
1. `_utility.scss` - 関数・変数
2. `_company.scss` - ブランド設定
3. `_structure.scss` - 構造スタイル
4. `theme_Algomatic.scss` - グローバルスタイル

### 8. デバッグ・メンテナンス

#### コメント規則
```scss
// =========================
// セクション名
// =========================

// 機能説明
.element {
  // プロパティ説明
  property: value;
}
```

#### ファイル管理
- **新規追加**: グローバルかローカルかを明確に判断
- **削除時**: 他のファイルへの影響を確認
- **リファクタリング**: 段階的に実行、動作確認

### 9. 禁止事項

#### スタイル定義
- ❌ グローバルファイルに個別ページスタイル
- ❌ HTMLタグをSCSSに記述
- ❌ 直接的なカラー値使用
- ❌ 重複するスタイル定義
- ❌ テンプレート未定義の要素・スタイルの生成

#### Markdown記述
- ❌ HTMLタグの多用
- ❌ インラインスタイル
- ❌ 複雑なネスト構造
- ❌ Markdownファイル内でのスタイル記述
- ❌ `<style>`タグの使用
- ❌ テンプレート未定義のセクション名・クラス名の使用

### 10. 推奨事項

#### スタイル定義
- ✅ グローバルとローカルの明確な分離
- ✅ 関数・変数の活用
- ✅ コメントによる説明
- ✅ 段階的な開発・テスト
- ✅ テンプレート定義内での要素・スタイル生成

#### Markdown記述
- ✅ 純粋なMarkdown構造
- ✅ セクション名によるスタイル指定
- ✅ 画像alt属性でのスタイル指定
- ✅ 読みやすい構造化
- ✅ 構造とコンテンツのみの記載
- ✅ SCSSファイルでのスタイル管理
- ✅ テンプレート定義済みのセクション名・クラス名の使用

## 開発フロー

1. **要件確認**: グローバルかローカルかを判断
2. **テンプレート確認**: 既存テンプレートで対応可能かチェック
3. **ファイル選択**: 適切なファイルを選択
4. **スタイル定義**: ルールに従って記述（テンプレート定義内のみ）
5. **テスト**: 動作確認
6. **ドキュメント更新**: 必要に応じてルールを更新

## Claude Code自動スライド化制限

### テンプレート制限の原則
- **許可**: テンプレートで定義済みの要素・スタイルのみ生成
- **許可**: テンプレートがない場合はutilityクラスで再現
- **禁止**: テンプレート未定義かつutilityクラスでも再現できない要素・スタイルの生成
- **制限**: 既存のセクション名・クラス名またはutilityクラスのみ使用

### 利用可能なテンプレート要素

#### 基本セクション（theme_Algomatic.scss）
- `title-slide`: タイトルスライド
- `toc-slide`: 目次スライド  
- `chapter-slide`: 章タイトルスライド

#### 構造テンプレート（_structure.scss）
- `cover.presentation`: 登壇資料系表紙
- `cover.company-deck`: 会社資料系表紙
- `three-column`: 3カラムレイアウト

#### 登壇者情報（title-slide内）
- `.speaker-flex`: 登壇者情報全体
- `.speaker-info`: 登壇者テキスト情報

### 利用可能なUtilityクラス（_utility.scss）

#### レイアウト
- `.w-full`, `.w-auto`, `.w-1/2`, `.w-1/3`: 幅制御
- `.h-full`, `.h-auto`: 高さ制御
- `.flex`, `.inline-flex`: フレックスボックス
- `.flex-col`, `.flex-row`: フレックス方向
- `.justify-start`, `.justify-center`, `.justify-end`: 水平配置
- `.items-start`, `.items-center`, `.items-end`: 垂直配置
- `.gap-1`, `.gap-2`, `.gap-4`, `.gap-8`: 間隔制御

#### タイポグラフィ
- `.text-left`, `.text-center`, `.text-right`: テキスト配置
- `.text-sm`, `.text-base`, `.text-lg`, `.text-xl`: フォントサイズ
- `.font-normal`, `.font-bold`: フォントウェイト
- `.text-white`, `.text-navyblue-950`: テキスト色

#### 余白・パディング
- `.m-0`, `.m-1`, `.m-2`, `.m-4`, `.m-8`: マージン
- `.p-0`, `.p-1`, `.p-2`, `.p-4`, `.p-8`: パディング
- `.mt-`, `.mb-`, `.ml-`, `.mr-`: 方向別マージン
- `.pt-`, `.pb-`, `.pl-`, `.pr-`: 方向別パディング

#### 背景・ボーダー
- `.bg-white`, `.bg-navyblue-950`: 背景色
- `.border`, `.border-2`, `.border-4`: ボーダー
- `.rounded`, `.rounded-lg`, `.rounded-full`: 角丸

### 自動生成時の制限チェック
1. **セクション名チェック**: 定義済みセクション名のみ使用
2. **クラス名チェック**: 定義済みクラス名またはutilityクラスのみ使用
3. **スタイルチェック**: 定義済みスタイルまたはutilityクラスのみ適用
4. **要素チェック**: 定義済み要素またはutilityクラスで再現可能な要素のみ生成

### テンプレート優先順位
1. **テンプレート要素**: 既存テンプレートで対応可能な場合は優先
2. **Utilityクラス**: テンプレートがない場合はutilityクラスで再現
3. **カスタム作成**: どちらでも対応できない場合は新規テンプレート作成を提案

## トラブルシューティング

### よくある問題
- **スタイルが適用されない**: ファイル読み込み順序を確認
- **カラーが反映されない**: 関数名・引数を確認
- **レイアウトが崩れる**: レスポンシブ対応を確認
- **テンプレート未定義エラー**: 利用可能なテンプレート要素またはutilityクラスを確認
- **Utilityクラス未定義エラー**: 利用可能なutilityクラスを確認

### 解決手順
1. ブラウザ開発者ツールでスタイル確認
2. ファイル読み込み順序を確認
3. 関数・変数の定義を確認
4. テンプレート定義済み要素またはutilityクラスの確認
5. 必要に応じてルールを更新
